<div class="container">
	<div nz-row style="height: 40px;margin-bottom: 15px;">
	  <div nz-col nzSpan="22">
		<nz-breadcrumb style="margin-left:2%;">
		  <nz-breadcrumb-item>
			<img style="vertical-align: baseline;margin-right: 10px;" src="./assets/bmimage/BM1/icon_flag@2x.png" alt="">
			<a style="font-size: 18px;">首页</a>
		  </nz-breadcrumb-item>
		  <nz-breadcrumb-item style="font-size: 18px;">
			版本中心
		  </nz-breadcrumb-item>
		  <nz-breadcrumb-item style="font-size: 18px;">
			应用管理
		  </nz-breadcrumb-item>
		</nz-breadcrumb>
	  </div>
	</div>

  <nz-card>
    <tms-query
      #baseQuery
      [headerDate]="queryHeader"
      (getQuery)="getQueryData($event)"
      (resetButton)="reset($event)"></tms-query>
  </nz-card>

  <nz-card style="margin-top: 20px;">
    <div class="table">
      <tms-list
        [tableClass]="'bmtableClass'"
        [listHeader]="header"
        [listData]="transactionActionData['query_app'].response.resultdata.bdy.data"
        [pageSize]="transactionActionData['query_app'].request.requestdata.bdy.pagesize"
        [totalCount]="transactionActionData['query_app'].response.resultdata.bdy.count"
        [isLoading]="transactionActionData['query_app'].actioning"
        (pageChangeHandler)="pageChange($event)"
        [topActions]="topActions"
        (topActionsHandler)="topActionsHandler($event)"
        [rowActions]="rowActions"
        (rowActionsHandler)="rowActionsHandler($event)"
        [isclickPointer]="false"
        [isEdit]="true"
        [isrowActionsFlag]="true">
      </tms-list>
    </div>
  </nz-card>
</div>

<nz-modal nzWidth='{{settingService.modal.large}}' [(nzVisible)]="isVisible "
          nzTitle="{{isUpdate ? '修改应用' : '新增应用'}}"
          (nzOnCancel)="handleCancel()"
          (nzOnOk)="handleOk()"
          [nzOkLoading]="transactionActionData['createOrUpdate_app'].actioning">
  <tms-form #baseForm  nz-row nzType="flex"  nzJustify="start"  [nzGutter]="24">
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_app'].request.requestdata.bdy.data.app_name" [inputType]="'input'"  [formsName]="'app_name'" [filedName]="'应用名称'" ></tms-filed>
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_app'].request.requestdata.bdy.data.app_code" [inputType]="'input'"  [formsName]="'file_name'" [filedName]="'应用代码'" ></tms-filed>
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_app'].request.requestdata.bdy.data.app_desc" [inputType]="'input'"  [formsName]="'enter_code'" [filedName]="'应用描述'" ></tms-filed>
  </tms-form>
</nz-modal>

<nz-modal nzWidth='{{settingService.modal.large}}' [(nzVisible)]="isPluginVisible "
          nzTitle="插件管理"
          (nzOnCancel)="handlePluginCancel()"
          [nzOkLoading]="transactionActionData['createOrUpdate_app'].actioning">
  <tms-list
    [tableClass]="'bmtableClass'"
    [listHeader]="pluginHeader"
    [listData]="transactionActionData['query_app_plugin'].response.resultdata.bdy.data"
    [isLoading]="transactionActionData['query_app_plugin'].actioning"
    [topActions]="pluginTopActions"
    (topActionsHandler)="pluginTopActionsHandler($event)"
    [rowActions]="pluginRowActions"
    (rowActionsHandler)="pluginRowActionsHandler($event)"
    [isclickPointer]="false"
    [isEdit]="true"
    [isrowActionsFlag]="true">
  </tms-list>
</nz-modal>

<nz-modal nzWidth='{{settingService.modal.large}}' [(nzVisible)]="isPluginEditVisible "
          nzTitle="{{isPluginUpdate ? '修改插件' : '新增插件'}}"
          (nzOnCancel)="handlePluginEditCancel()"
          (nzOnOk)="handlePluginOk()"
          [nzOkLoading]="transactionActionData['createOrUpdate_plugin'].actioning">
  <tms-form #pluginForm  nz-row nzType="flex"  nzJustify="start"  [nzGutter]="24">
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_plugin'].request.requestdata.bdy.data.name" [inputType]="'input'"  [formsName]="'name'" [filedName]="'插件名称'" ></tms-filed>
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_plugin'].request.requestdata.bdy.data.code" [inputType]="'input'"  [formsName]="'code'" [filedName]="'插件代码'" ></tms-filed>
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_plugin'].request.requestdata.bdy.data.app_name" [inputType]="'input'"  [formsName]="'app_name'" [filedName]="'应用名称'" ></tms-filed>
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_plugin'].request.requestdata.bdy.data.file_name" [inputType]="'input'"  [formsName]="'file_name'" [filedName]="'插件文件名'" ></tms-filed>
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_plugin'].request.requestdata.bdy.data.enter_code" [inputType]="'input'"  [formsName]="'enter_code'" [filedName]="'插件入口代码'" ></tms-filed>
    <tms-filed nz-col [nzSpan]="12" [(fieldModel)] = "transactionActionData['createOrUpdate_plugin'].request.requestdata.bdy.data.part_name" [inputType]="'input'"  [formsName]="'part_name'" [filedName]="'插件所属模块'" ></tms-filed>
  </tms-form>
</nz-modal>
